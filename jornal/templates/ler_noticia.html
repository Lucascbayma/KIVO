{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ noticia.title|default:noticia.titulo|default:"Detalhe da Notícia" }}</title>
    
    <link rel="stylesheet" href="{% static 'jornal/css/ler_noticia.css' %}">
    <link rel="stylesheet" href="{% static 'jornal/css/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap">
</head>

<body id="body-noticia" data-noticia-titulo="{{ noticia.title|default:noticia.titulo }}">

    <div class="uol-bar">
        <img src="{% static 'jornal/imagens/uol.svg' %}" alt="UOL" class="uol-logo">
    </div>

    <input type="checkbox" id="hamburger-toggle" class="hamburger-toggle">

    <nav class="mobile-menu" id="mobile-menu-panel">
        <div class="menu-header">
            <label for="hamburger-toggle" class="mobile-menu-close">&times;</label>
        </div>
        <div class="mobile-menu-body">
            <a class="menu-link-main" href="{% url 'jornal:home' %}">Home</a>
            <a class="menu-link-main" href="{% url 'jornal:todas_as_noticias' %}">Últimas Notícias</a>
            </div>
    </nav>
    <label for="hamburger-toggle" class="mobile-menu-overlay"></label>

    <header class="header">
        <div class="col left">
            <a onclick="history.back()" class="header-icon-btn" style="cursor: pointer;" title="Voltar">
                <i class="fas fa-arrow-left"></i>
            </a>
        </div>

        <div class="col center">
            <div class="logo-container">
                <img src="{% static 'jornal/imagens/logo.svg' %}" alt="JC" class="logo-img">
            </div>
        </div>

        <div class="col right">
            <a href="#" class="header-icon-btn search-btn" title="Buscar">
                <i class="fas fa-magnifying-glass"></i>
            </a>
            <label for="hamburger-toggle" class="hamburger-label" title="Menu">
                <i class="fas fa-bars"></i>
            </label>
        </div>
    </header>

    <main class="container-noticia" style="padding-top: 64px;">

    {% if noticia %}

        <header class="header-noticia">
            <h1 class="titulo-noticia">{{ noticia.title|default:noticia.titulo }}</h1>
            <p class="lead-noticia">{{ noticia.description|default:noticia.subtitulo }}</p>
        </header>

                </div>
        </div>

        <div class="share-topo">
            <i class="bi bi-share"></i>
        </div>

        <figure class="imagem-principal">
            {% if noticia.image_url %}
                <img src="{{ noticia.image_url }}" alt="{{ noticia.title }}">
            {% elif noticia.imagem %}
                <img src="{{ noticia.imagem.url }}" alt="{{ noticia.titulo }}">
            {% endif %}
        </figure>

        <section class="conteudo-noticia">
            {% if noticia.conteudo %}
                <p style="white-space: pre-line;">{{ noticia.conteudo }}</p>
            {% else %}
                <p>{{ noticia.description }}</p>
                <a href="{{ noticia.link }}" target="_blank" class="destaque-link">[LEIA MAIS NA FONTE]</a>
            {% endif %}
        </section>

        <div class="anuncio-interno-noticia">
            <img src="{% static 'jornal/imagens/anuncio.jpg' %}" alt="Publicidade">
        </div>

        <section class="noticias-relacionadas">
            
            <div class="header-relacionadas">
                <h2 class="titulo-relacionadas">LEIA TAMBÉM</h2>
                <a href="{% url 'jornal:todas_as_noticias' %}" class="btn-ver-mais">Ver Mais</a>
            </div>

            {% if recomendacoes %}
                <div class="grid-relacionadas">
                {% for rec in recomendacoes %}
                    <article class="relacionada-item">
                        <a href="{% if rec.id %}{% url 'artigo_detalhe' rec.id %}{% else %}{% url 'detalhe_noticia_estatica' %}?link={{ rec.link }}{% endif %}" class="link-relacionada">
                            <div class="thumb-relacionada">
                                {% if rec.image_url %}
                                    <img src="{{ rec.image_url }}" alt="{{ rec.title }}">
                                {% elif rec.imagem %}
                                    <img src="{{ rec.imagem.url }}" alt="{{ rec.titulo }}">
                                {% else %}
                                    <div class="sem-imagem">Sem Imagem</div>
                                {% endif %}
                            </div>
                            <p class="titulo-item-relacionado">{{ rec.title|default:rec.titulo|truncatechars:60 }}</p>
                        </a>
                    </article>
                {% endfor %}
                </div>
            {% endif %}
        </section>

    {% endif %}

    </main>

    <footer class="footer-jcpe">
        <div class="footer-container">
            <div class="footer-logo">
                <img src="{% static 'jornal/imagens/logo.svg' %}" alt="Logo JC PE">
            </div>
            <div class="footer-links">
                <span class="footer-text">LGPD</span>
                <span class="footer-text">Política de Privacidade</span>
                <span class="footer-text">Anuncie Conosco</span>
            </div>
        </div>
    </footer>  

    <script src="{% static 'jornal/js/rastreamento_leitura.js' %}"></script>
</body>
</html>