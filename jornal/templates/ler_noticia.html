{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ noticia.title|default:"Detalhe da Notícia" }}</title>
    
    <link rel="stylesheet" href="{% static 'jornal/css/ler_noticia.css' %}"> 
    <link rel="stylesheet" href="{% static 'jornal/css/global.css' %}"> 
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body id="body-noticia" 
      data-noticia-titulo="{{ noticia.title }}"> 
    
    <main class="container-noticia">
        
        {% if noticia %}

            <header class="header-noticia">
                <h1 class="titulo-noticia">{{ noticia.title }}</h1>
                
                <p class="lead-noticia">{{ noticia.description }}</p>
            </header>

            <div class="metadados-e-compartilhamento">
                <div class="info-data-autor">
                    <p class="autor">Fonte: <strong>{{ noticia.source_id|default:"Desconhecida" }}</strong></p>
                    
                    <p class="datas">Publicado em {{ noticia.pubDate|date:"d/m/Y" }} às {{ noticia.pubDate|date:"H:i" }}</p>
                </div>
            </div>

            <figure class="imagem-principal">
                {% if noticia.image_url %}
                    <img src="{{ noticia.image_url }}" alt="{{ noticia.title }}" onerror="this.onerror=null; this.style.display='none';">
                {% else %}
                    <p style="text-align: center; color: #999;">(Imagem não disponível na API)</p>
                {% endif %}
            </figure>

            <section class="conteudo-noticia">
                <p><strong>A notícia completa só pode ser acessada na fonte original, pois esta API não fornece o corpo do texto.</strong></p>
                <p>Para continuar lendo e obter todos os detalhes da matéria, clique no link abaixo:</p>
                
                <a href="{{ noticia.link }}" 
                   target="_blank" 
                   class="destaque-link" 
                   id="link-fonte-original" 
                   style="display: block; margin-top: 15px; font-size: 1.15rem;">
                    [LEIA MAIS] - Clique aqui para ir ao site da fonte: {{ noticia.source_id|default:"Fonte Externa" }}
                </a>
                
            </section>
            
            <section class="noticias-relacionadas">
                <h2 class="titulo-relacionadas">LEIA TAMBÉM</h2>
                <article class="relacionada-item">
                    <a href="#" class="link-relacionada">
                        <div class="thumb-relacionada">
                            <img src="{% static 'jornal/imagens/img/thumb_1.jpg' %}" alt="Notícia Relacionada 1">
                        </div>
                        <p class="titulo-item-relacionado">CNH sem autoescolas: Entidades voltam a alertar para explosão de sinistros de trânsito...</p>
                    </a>
                </article>
            </section>


        {% else %}
            <header class="header-noticia">
                <h1 class="titulo-noticia">Erro ao Carregar Notícia</h1>
                <p class="lead-noticia">Não foi possível encontrar a notícia solicitada na sessão. Por favor, volte para a <a href="{% url 'home' %}">Página Inicial</a> e clique novamente.</p>
            </header>
        {% endif %}

    </main>
    
    <div id="banner-continuar-leitura" style="display: none;">
        <div class="conteudo-banner">
            <span class="mensagem-banner">
                Você estava lendo: <strong id="titulo-noticia-banner"></strong>
            </span>
            <a id="link-noticia-banner" href="#" class="btn-voltar-leitura">
                Deseja voltar para o artigo?
            </a>
            <button id="fechar-banner" class="btn-fechar">×</button>
        </div>
    </div>
    
    <script src="{% static 'jornal/js/rastreamento_leitura.js' %}"></script>

</body>
</html>