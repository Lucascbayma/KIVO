{% extends 'base.html' %}
{% load static %}

{% block title %}
    {{ noticia.title|default:noticia.titulo|default:"Detalhe da Not√≠cia" }}
{% endblock %}
{% block content %}
    <link rel="stylesheet" href="{% static 'jornal/css/ler_noticia.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <div class="container-noticia" id="body-noticia" data-noticia-titulo="{{ noticia.title|default:noticia.titulo }}">

    {% if noticia %}

        <header class="header-noticia">
            <h1 class="titulo-noticia">{{ noticia.title|default:noticia.titulo }}</h1>
            <p class="lead-noticia">{{ noticia.description|default:noticia.subtitulo }}</p>
        </header>

        <div class="metadados-e-compartilhamento">
            <div class="info-data-autor">
                {% if noticia.autor %}
                    <p class="autor">Autor: <strong>{{ noticia.autor }}</strong></p>
                {% endif %}
            </div>
        </div>

        <div class="share-topo">
            <i class="bi bi-share"></i>
        </div>

        <figure class="imagem-principal">
            {% if noticia.image_url %}
                <img src="{{ noticia.image_url }}" alt="{{ noticia.title }}">
            {% elif noticia.imagem %}
                <img src="{{ noticia.imagem.url }}" alt="{{ noticia.titulo }}">
            {% endif %}
        </figure>

        <section class="conteudo-noticia">
            {% if noticia.conteudo %}
                <p style="white-space: pre-line;">{{ noticia.conteudo }}</p>
            {% else %}
                <p>{{ noticia.description }}</p>
                <a href="{{ noticia.link }}" target="_blank" class="destaque-link">[LEIA MAIS NA FONTE]</a>
            {% endif %}
        </section>

        <div class="anuncio-interno-noticia">
            <img src="{% static 'jornal/imagens/anuncio.jpg' %}" alt="Publicidade">
        </div>

        <section class="noticias-relacionadas">
            <div class="header-relacionadas">
                <a href="{% url 'jornal:todas_as_noticias' %}" class="btn-ver-mais">Ver Mais</a>
            </div>

            {% if recomendacoes %}
                <div class="grid-relacionadas">
                {% for rec in recomendacoes %}
                    <article class="relacionada-item">
                        <a href="{% if rec.id %}{% url 'artigo_detalhe' rec.id %}{% else %}{% url 'detalhe_noticia_estatica' %}?link={{ rec.link }}{% endif %}" class="link-relacionada">
                            <div class="thumb-relacionada">
                                {% if rec.image_url %}
                                    <img src="{{ rec.image_url }}" alt="{{ rec.title }}">
                                {% elif rec.imagem %}
                                    <img src="{{ rec.imagem.url }}" alt="{{ rec.titulo }}">
                                {% else %}
                                    <div class="sem-imagem">Sem Imagem</div>
                                {% endif %}
                            </div>
                            <p class="titulo-item-relacionado">{{ rec.title|default:rec.titulo|truncatechars:60 }}</p>
                        </a>
                    </article>
                {% endfor %}
                </div>
            {% endif %}
        </section>

    {% endif %}

    </div>

{% endblock %}